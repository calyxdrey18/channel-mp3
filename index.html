<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WhatsApp MP3 Sender</title>
<style>
body { font-family: Arial; margin: 40px; background: #f2f2f2; }
.container { max-width: 600px; margin: auto; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
h2 { text-align: center; color: #075e54; }
input, button { width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ccc; }
button { background-color: #25d366; color: white; border: none; cursor: pointer; }
button:hover { background-color: #128c7e; }
</style>
</head>
<body>
<div class="container">
    <h2>WhatsApp MP3 Sender</h2>
    <p>Enter WhatsApp Channel Link:</p>
    <input type="text" id="channelLink" placeholder="e.g. https://chat.whatsapp.com/ABC123">
    <p>Select MP3 file:</p>
    <input type="file" id="mp3file" accept=".mp3">
    <p>Optional: Trim Audio (seconds)</p>
    <input type="number" id="start" placeholder="Start time (sec)">
    <input type="number" id="duration" placeholder="Duration (sec)">
    <button onclick="sendMP3()">Send MP3</button>
    <p id="status"></p>
</div>
<script>
async function sendMP3() {
    const channelLink = document.getElementById('channelLink').value;
    const mp3file = document.getElementById('mp3file').files[0];
    const start = document.getElementById('start').value;
    const duration = document.getElementById('duration').value;
    if(!channelLink || !mp3file) { alert('Channel and MP3 required!'); return; }

    const formData = new FormData();
    formData.append('channelLink', channelLink);
    formData.append('mp3', mp3file);
    if(start) formData.append('start', start);
    if(duration) formData.append('duration', duration);

    const statusEl = document.getElementById('status');
    statusEl.textContent = 'Sending...';

    try {
        const res = await fetch('/send-mp3', { method: 'POST', body: formData });
        const data = await res.json();
        statusEl.textContent = data.success ? data.message : 'Error: ' + data.error;
    } catch(e) {
        statusEl.textContent = 'Error: ' + e.message;
    }
}
</script>
</body>
</html>